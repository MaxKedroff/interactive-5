<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ù–∞–π–¥–∏ –Ω–∞—Ä—É—à–µ–Ω–∏–µ</title>
<link href="https://fonts.googleapis.com/css2?family=Montserrat+Alternates:wght@400;600;700&display=swap" rel="stylesheet" />
<style>

  :root {
    --main-font: 'Montserrat Alternates', sans-serif;
  }

  body{
    font-family: var(--main-font);
    display:flex;
    flex-direction:column;
    align-items:center;
    padding:20px;
    
  }

  #photo-container{
    position:relative;
    max-width:800px;
    width:80%;
    margin-bottom:20px;
  }

  #photo-container img{
    width:100%;
    display:block;
  }

  /* –ù–µ–≤–∏–¥–∏–º—ã–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã–µ –æ–±–ª–∞—Å—Ç–∏ */
  .zone{
    position:absolute;
  }

  /* –ö–æ–≥–¥–∞ –Ω–∞—Ä—É—à–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–æ–¥—Å–≤–µ—Ç–∫–∞ */
  .zone.found{
    border:4px solid #1abc9c; /* –∑–µ–ª—ë–Ω–∞—è —Ä–∞–º–∫–∞ */
    pointer-events:none;      /* –∏—Å–∫–ª—é—á–∏—Ç—å –∏–∑ –∫–ª–∏–∫–æ–≤ –ø–æ—Å–ª–µ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è */
  }

  #status{
    margin-bottom:10px;
    font-size:1.1rem;
  }

  #log{
    list-style:none;
    padding:0;
    margin:0 0 15px 0;
    max-width:800px;
    width:100%;
  }
  #log li{
    background:#fff;
    border-left:4px solid #1abc9c;
    padding:8px 12px;
    margin-bottom:6px;
    box-shadow:0 1px 3px rgba(0,0,0,0.08);
    border-radius:4px;
    font-size:0.95rem;
  }

  #restart{
    display:none;
    padding:10px 18px;
    border:none;
    background:#1abc9c;
    border-radius:6px;
    color:#fff;
    font-size:1rem;
    cursor:pointer;
  }
#container {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border: 2px solid orange;
    border-radius: 10px;
    padding: 10px;
}
</style>
</head>
<body>
<div id="container">
<p><strong>–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ. </strong>–Ω–∞–π–¥–∏—Ç–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –ø—Ä–∏ —Å–µ—Ä–≤–∏—Ä–æ–≤–∫–µ –Ω–∞ —Ñ–æ—Ç–æ –Ω–∏–∂–µ</p>
<p id="status">–©—ë–ª–∫–Ω–∏—Ç–µ –ø–æ –º–µ—Å—Ç—É –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–∞ —Ñ–æ—Ç–æ.</p>

<div id="photo-container">
  <img id="photo" src="" alt="–§–æ—Ç–æ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏">
</div>

<ul id="log"></ul>

<button id="restart">–ù–∞—á–∞—Ç—å —Å–Ω–∞—á–∞–ª–∞</button>
</div>
<script>
  // –§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ –∑–æ–Ω—ã –Ω–∞—Ä—É—à–µ–Ω–∏–π
  const photos = [
    {
      src: "https://storage.yandexcloud.net/audio-test-sc/interactive%205/1%20(1).jpg",
      zones: [
        {
          left: 0.10, top: 0.55, width: 0.55, height: 0.35,
          msg: "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤–∏–ª–∫–∞"
        }
      ]
    },
    {
      src: "https://storage.yandexcloud.net/audio-test-sc/interactive%205/2%20(1).jpg",
      zones: [
        {
          left: 0.35, top: 0.25, width: 0.30, height: 0.35,
          msg: "–ù–µ–æ–ø—Ä—è—Ç–Ω–æ –≤—ã–ª–æ–∂–µ–Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫–∞: –≤–∏–ª–∫–∞ –¥–æ–ª–∂–Ω–∞ –ª–µ–∂–∞—Ç—å –Ω–∞ —Å–∞–ª—Ñ–µ—Ç–∫–µ"
        }
      ]
    },
    {
      src: "https://storage.yandexcloud.net/audio-test-sc/interactive%205/3%20(1).jpg",
      zones: [
        {
          left: 0.05, top: 0.50, width: 0.90, height: 0.40,
          msg: "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥–Ω–æ—Å"
        }
      ]
    },
    {
      src: "https://storage.yandexcloud.net/audio-test-sc/interactive%205/5%20(2).jpg",
      zones: [
        {
          left: 0.25, top: 0.23, width: 0.20, height: 0.30,
          msg: "–û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ª–æ–∂–∫–∞ –¥–ª—è –º–æ—Ä–æ–∂–µ–Ω–æ–≥–æ"
        }
      ]
    }
  ];

  const container = document.getElementById("photo-container");
  const img        = document.getElementById("photo");
  const statusP    = document.getElementById("status");
  const logList    = document.getElementById("log");
  const restartBtn = document.getElementById("restart");

  let currentIndex = 0;

  /**
   * –ó–∞–≥—Ä—É–∂–∞–µ—Ç —Ñ–æ—Ç–æ –∏ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞–µ—Ç –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –∑–æ–Ω—ã
   */
  function loadPhoto(index){
    // –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–æ–Ω—ã –∏ —Å–æ–æ–±—â–µ–Ω–∏—è
    container.querySelectorAll(".zone").forEach(z => z.remove());
    logList.innerHTML = "";

    const data = photos[index];
    img.src = data.src;

    img.onload = () => {
      data.zones.forEach((z) => {
        const div = document.createElement("div");
        div.className = "zone";
        div.style.left   = (z.left * 100)   + "%";
        div.style.top    = (z.top  * 100)   + "%";
        div.style.width  = (z.width * 100)  + "%";
        div.style.height = (z.height* 100)  + "%";
        div.dataset.found = "false";
        div.dataset.msg   = z.msg;

        div.addEventListener("click", () => {
          if(div.dataset.found === "false"){
            div.dataset.found = "true";
            div.classList.add("found");
            logViolation(div.dataset.msg);
            checkAllFound();
          }
        });

        container.appendChild(div);
      });

      statusP.textContent = `–ù–∞–π–¥–∏—Ç–µ –≤—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è –Ω–∞ —Ñ–æ—Ç–æ (–í—Å–µ–≥–æ: ${data.zones.length})`;
    };
  }

  /**
   * –î–æ–±–∞–≤–ª—è–µ—Ç –ø–æ—è—Å–Ω–µ–Ω–∏–µ –≤ –ª–æ–≥ –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π
   */
  function logViolation(text){
    const li = document.createElement("li");
    li.textContent = text;
    logList.appendChild(li);
  }

  /**
   * –ü—Ä–æ–≤–µ—Ä—è–µ—Ç, –Ω–∞–π–¥–µ–Ω—ã –ª–∏ –≤—Å–µ –∑–æ–Ω—ã –Ω–∞ —Ç–µ–∫—É—â–µ–º —Ñ–æ—Ç–æ
   */
  function checkAllFound(){
    const allFound = [...container.querySelectorAll(".zone")]
      .every(z => z.dataset.found === "true");

    if(allFound){
      currentIndex++;
      if(currentIndex < photos.length){
        statusP.textContent = "–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —Ñ–æ—Ç–æ‚Ä¶";
        setTimeout(() => loadPhoto(currentIndex), 1500);
      }else{
        statusP.textContent = "–í—ã –Ω–∞—à–ª–∏ –≤—Å–µ –Ω–∞—Ä—É—à–µ–Ω–∏—è! üéâ";
        restartBtn.style.display = "inline-block";
      }
    }
  }

  restartBtn.addEventListener("click", () =>{
    currentIndex = 0;
    restartBtn.style.display = "none";
    loadPhoto(currentIndex);
  });

  // –°—Ç–∞—Ä—Ç–æ–≤–æ–µ —Ñ–æ—Ç–æ
  loadPhoto(currentIndex);
</script>

</body>
</html>
